# <Re:room>

## サイト概要
>このアプリではユーザーの皆さんのオシャレなお部屋の一角や、機能美あふれるポイントのイメージ等をシェアていただくことができます。そして、これらの情報をヒントに貴方のお部屋に取り込むことが出来れば、また違った毎日を快適に過ごせるでしょう。自身の新しい空間と出会える可能性を秘めたSNS。

>このアプリの目的は、部屋をイノベーションするキッカケをユーザーにもたらし、いつも生活している空間に心地良い変化を与えリラックスして頂くことです。

### サイトテーマ
>いつもの家が更に心地良くなる

### テーマを選んだ理由
afterコロナの日本ではコロナ以前の生活には戻らず、少なからず在宅勤務が引き続き執り行われると各方面から推測されています。
　このアプリを活用してもらうことによって各家庭環境の満足度を底上げできれば、今のワークプレイスを更に快適な空間へと変えられ、精神的サポートのもと生産性の向上が見込めるのではないかと思ったためです。
 　延いてはコロナ後の日本でユーザーの皆さんに、再び活躍する場を間接的でもサポート出来たら嬉しいと思ったことが、このテーマを選んだ１つ目の理由になります。


#### afterコロナという面からのアプローチ（２つ目の理由）（戦略）（動機）
Q.何故、このアプリケーションなのか。

>A.
>コロナが到来して真っ先にとられた対策は緊急事態宣言という『半強制力』で、人を外に『出さない』対策でした。そしていつの時代も『強制力』によっては根本的に『人は変えられない』ことは歴史が証明してくれています。
　そこで各個人が自ら家にいたいと思わせるための工夫として、家庭環境が充実するためのアイテムが各メディアで取り上げられはじめました。記憶に新しいとこですと、Nintendo Switchは『家に居たい』と思わせ、コーヒーメーカーなどの嗜好品は『家いいな』と思わせたように感じます。
　しかしワクチンが徐々に普及し始めている現在、またはこの先のafterコロナでは、家庭環境をより良くする目的は『人を家に留める』ことでは無くなります。
　では次の目的に、 afterコロナによって更に普及するであろうテレワーク、その働き手の『精神面をサポートする』ために家庭環境を整えるといった目的に、このアプリをキッカケにベクトルを変化させれば、『精神的にサポートするアプリケーション』が今まで以上に活用されていく可能性が出てくると考えました。
 
なので私はそこに着目して開発することにしました。


###### 参考記事抜粋①）
コロナ危機収束後の目標とする出社率（将来意向）
```
全員が出社した場合を100%とし
企業がどのくらいの出社率を望んでいるのかを、パーセンテージで示しています。

　　テレワークを以降あり　75.７％
 
 「50%～」（22.2%）が最も多く、全体の約1/5の企業は
 将来的に出社率を半分程度にしたいと考えていることがわかります。
 また、少しでもテレワークを行う意向がある企業は75.7%と、全体の約3/4を占めていました。
 
 「コロナ危機が収束した後、働き方やワークプレイスの動向は、コロナ以前の状態に戻るか？」
 という問いに対しては
 結論、「どうやら戻ることはないと思われる」というのがアンサーになります。
```
>引用）
インフォニスタ/アフターコロナのワークプレイス予測
コロナ危機が収束しても、以前の世界には戻らない　参照


### ターゲットユーザ
Afterコロナにより一人当たりの仕事量が顕著に増える可能性を持つ、また長時間勤務、在宅勤務になる、または増える方。

>主に『建築業界の施工管理者やサービス業界の役付きの方』　等。

（ターゲットを広げると大手には敵わないので、ニッチな領域で勝負することが鍵となると考えたため絞り込みました。）

###### 参考記事抜粋②）
アフターコロナにおける懸念
```
Q
コロナ禍が収束した後に懸念されることは何ですか？

A
「人手不足」が約5割
最多は「経済活性化に伴う人手不足」の
47.5％（9,652社中、4,589社）
```

>引用）
東京商工リサーチ/第14回「新型コロナウイルスに関するアンケート」調査
pdf/10ページ目　参照

建築業界の人手不足（施工管理者）
```
業種別従業員過不足DIの推移から見るに、
全ての業種において、2009年をピーク
に総じてマイナス方向に転じ、2013年第4四半期
以降、全ての業種において従業員が「過剰」と答
えた企業の割合を従業員が「不足」と答えた企業
の割合が上回っていることが分かる。

特に、建設業やサービス業といった業種において人手不足感
が顕著に表れている。
```
>引用）
中小企業庁/深刻化する人手不足と中小企業の生産性革命/第二部
pdf/2ページ目/ブラフ　参照

### 主な利用シーン
もっと部屋のこの部分を『機能的』『オシャレ』または『快適』などにイノベーションしたいと思った瞬間。

>部屋に安らぎが欲しい時</br>
>いつもの空間に少し飽きた時</br>
>引越し先のレイアウトを考えたい時


## 今後のリサーチ課題
>※上記ではニーズという観点からしか推測していません。

これからもしもこのアプリケーションを運用するのであれば、収益化することをに視点を変え、それはどのようなメソッドがあるのか、それに対してどの程度のリターンが得られるのかといった実数が、企業的には最も必要なポイントのはずです。

なので実数を出すためのリサーチ等が、今後の私の課題とされます。
```
①方法レベルの課題

・どんな収益化するメソッドがあるかをリサーチする必要性

＋

②ターゲットレベルの課題

・市場占有率なども過去の類似例から見極めてリサーチする必要性

（ターゲット層と市場に流れ込んでくるユーザー数の絶対値をフェルミ推定によって算出）
（市場の絶対値を出せるか）

＋

③結果レベルの課題

・企業の長期的な利益実数を出すためにリサーチする必要性

（例：ユーザーの約１％が何かを購入
その結果アフィリエイトではバックマージンは具体的にどの程度得られるか等）

```


## まとめ
プロダクトライフサイクルが近年極端に短くなってきたこともあり、私はこのアプリを今後運用するのであれば、単発では終わらせる気は無く、時代に合わせた形に進化させていきたいと考えています。

例えば、このアプリをプラットフォームとして、別業者にリフォーム申請できる機能の追加であったりと広がりを見せることは可能と考えています。（今回は実装しませんが）

課題は山積みではありますがこれらがクリアできれば、短期間の間ではあっても市場価値を持たせることができるんだと理解できたので、良い経験になりました。

今後とも新しい発見を見つけるためにもトレンドには敏感に開発していきたいです。


## 参考元一覧
>
>厚生労働省/2020/04時点オフィスワーク中心（事務・企画・開発など）の方におけるテレワーク実施割合（％）の推移アンケート
>
>インフォニスタ/アフターコロナのワークプレイス予測
>
>東京商工リサーチ/第14回「新型コロナウイルスに関するアンケート」調査
>
>PR TIMES/Afterコロナで予測される人手不足
>
>中小企業庁/深刻化する人手不足と中小企業の生産性革命/第二部
>
>OMRON/太陽光不足が「SEうつ病」を招く

## 設計書

### ER図
![ER_PF](https://user-images.githubusercontent.com/81736172/121328894-ac955800-c94f-11eb-9ec9-0f737253a82b.png)

### UIフロー
![UI flows_PF](https://user-images.githubusercontent.com/81736172/121328949-b9b24700-c94f-11eb-8ce2-e5e7b5597fa5.png)

### ワイヤーフレーム
[ここから](https://app.diagrams.net/#G1uM-Ji_Bn275JwsjEzsOpta4VNWInhA0J)

### テーブル定義書
[ここから](https://docs.google.com/spreadsheets/d/1oyqAyIsp-EtzKQMCIrzMiwrGk9grVu2q/edit#gid=84123752)

## チャレンジ要素一覧
[ここから](https://docs.google.com/spreadsheets/d/10fBULW2zp7TOlEqKp4M9HFH9mq97a3og0Trzv95gXyI/edit#gid=1936046502)

## 開発環境
OS：Linux(CentOS)
言語：HTML,CSS,JavaScript,Ruby,SQL
フレームワーク：Ruby on Rails
JSライブラリ：jQuery
IDE：Cloud9


## 使用素材
- 外部サービスの画像素材・音声素材を使用した場合は、必ずサービス名とURLを明記してください。
(未定ですがおそらく取り込みます。) 
- 使用しない場合は、使用素材の項目をREADMEから削除してください。
(未定ですがおそらく取り込みます。) 




# スムーズな環境構築を求めて
<details>
<summary>クリックで展開</summary>

## gemインストール

```
gem "refile", require: "refile/rails", github: 'manfe/refile'
gem "refile-mini_magick"
gem 'devise'
gem 'kaminari', '~> 0.17.0'
gem 'bootstrap', '~> 4.5'
gem 'jquery-rails'
gem 'font-awesome-sass', '~> 5.13'
gem 'dotenv-rails'

ーーーーーーーー
gem 'pry-rails'
gem 'pry-byebug'
上記の２つは『group :development, :test do』の中に入れる！
ーーーーーーーー

$ bundle install
$ rails g devise:install
```


## モデル作成

### User
```
$ rails g devise User
#デフォルトはメールアドレスとパスワードのみ
```
> カラム追加
```
$ rails g migration AddColumnsToUsers 
```
>XXXXXXXXXXX_add_columns_to_users.rb
``` ruby
  def change
    add_column :users, :name, :string
    add_column :users, :profile_image, :string
    add_column :users, :introduction, :text
    add_column :users, :greeting, :string
  end
  
  またはrails db:migrateする前に直接migration fileに記述する。
　t.string :name
  t.string :profile_image_id
  t.text   :introduction
  t.string :greeting
```
### Content
```
$ rails g model Content user_id:integer content_image:string description:text
```
### Relationship
```
$ rails g model Relationship following_id:integer follower_id:integer
```
### Favorite
```
$ rails g model Favorite user_id:integer content_id:integer
```
### Comment
```
$ rails g model Comment user_id:integer content_id:integer comment:text
```
### Chat
```
$ rails g model Chat user_id:integer room_id:integer message:text
```
### Room
```
$ rails g model Room
```
### UserRoom
```
$ rails g model UserRoom user_id:integer room_id:integer
```

rails db:migrate


## アソシエーション作成

>user.rb
~~~user.rb
has_many :contents
has_many :comments
has_many :favotites
has_many :chats
has_many :user_rooms
has_many :rooms, through: :user_rooms


has_many :active_relationships, class_name: "Relationship", foreign_key: :following_id

has_many :followings, through: :active_relationships, source: :follower


has_many :passive_relationships, class_name: "Relationship", foreign_key: :follower_id

has_many :followers, through: :passive_relationships, source: :following
~~~


>content.rb
~~~content.rb
belongs_to :user
has_many :comments, dependent: :destroy
has_many :favorites, dependent: :destroy
~~~

>relationship.rb
~~~relationship.rb
belongs_to :following, class_name: "User"
belongs_to :follower, class_name: "User"
~~~

>favorite.rb
~~~favorite.rb
belongs_to :user
belongs_to :content
~~~

>comment.rb
~~~comment.rb
belongs_to :user
belongs_to :content
~~~

>chat.rb
~~~chat.rb
belongs_to :user
belongs_to :room
~~~

>room.rb
~~~room.rb
has_many :chats
has_many :user_rooms
~~~

>user_room.rb
~~~user_room.rb
belongs_to :user
belongs_to :room
~~~


## コントローラー作成

#### homes
```
rails g controller homes about
```

#### users（devise）（viewも一緒に）
```
rails g devise:controllers users
rails g devise:views
```
#### users
```
rails g controller users index show edit 
```

#### contents
```
rails g controller contents index show edit new 
```

#### relationships
```
rails g controller relationships index  
```

#### favorites
```
rails g controller favorites index 
```

#### comments
```
rails g controller comments index 
```

#### chats
```
rails g controller chats index show
```


## ルーティング作成


>routes.rb

~~~ ruby


    devise_for :users
  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html

  root :to => "contents#index"


    post '/contents/guest_sign_in', to: 'contents#guest_sign_in'
    
    resource :homes do
     get :about, on: :collection
    end


    resources :users, only: [:index, :show, :edit, :update] do
     resources :relationships, only: [:index]
     resource  :relationships, only: [:create, :destroy]
    end


    resources :contents do
     resources :favorites, only: [:index]
     resource  :favorites, only: [:create, :destroy]
     resources :comments,  only: [:destroy]
     resource  :comments,  only: [:create]
    end


    get "search" => "searches#search_result", as: "search_result"

    get 'chat/:id' => 'chats#show', as: 'chat'

    resources :chats, only: [:index, :create]
    
    resources :notifications, only: [:index] do
     delete :destroy_all , on: :collection
     
    end

    
~~~
</details>

追加＊通知機能のコントローラーとモデル。ER図書き換えアプリケーション詳細設定の書き換え。（７／２５に）